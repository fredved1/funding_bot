INFO:__main__:ğŸ”§ Initializing components...
INFO:utils.hyperliquid_client:ğŸ“¡ Client initialized for 0x668D96ce...
INFO:__main__:ğŸ” Resolving spot asset ID for HYPE...
INFO:__main__:âœ… Resolved HYPE -> @150
INFO:__main__:ğŸ”„ Reconciling state with exchange...
INFO:__main__:âœ… Reconciliation complete:
INFO:__main__:   Positions: 0
INFO:__main__:   Spot USDC: $24.00
INFO:__main__:   Perp Margin: $25.00
INFO:__main__:   Buffer: $25.00
INFO:core.margin_monitor:ğŸ• Watchdog started
INFO:strategies.funding_harvester:ğŸŒ¾ Funding Harvester started
INFO:__main__:ğŸš€ Bot started!
INFO:__main__:   Coin: HYPE
INFO:__main__:   Spot Symbol: @150
INFO:__main__:   Strategy: Funding
INFO:__main__:   Dry Run: False
WARNING:utils.notifier:âš ï¸ Discord notifications disabled (no webhook URL)
INFO:services.database:ğŸ’¾ Database consumer started
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:websocket_manager:Connecting to WebSocket: wss://api.hyperliquid.xyz/ws
INFO:services.database:ğŸ’¾ Database tables initialized
INFO:websocket_manager:âœ… WebSocket connected and subscribed to L2 books
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:websocket_manager:Reconnecting in 1.0s...
INFO:websocket_manager:Connecting to WebSocket: wss://api.hyperliquid.xyz/ws
INFO:websocket_manager:âœ… WebSocket connected and subscribed to L2 books
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:websocket_manager:Reconnecting in 1.0s...
INFO:websocket_manager:Connecting to WebSocket: wss://api.hyperliquid.xyz/ws
INFO:websocket_manager:âœ… WebSocket connected and subscribed to L2 books
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
INFO:services.funding_scanner:ğŸ” Scanning for funding opportunities...
INFO:services.funding_scanner:ğŸ“Š Found 0 viable opportunities out of 0 scanned
WARNING:core.margin_monitor:âš ï¸ WebSocket stale for 1033s. Attempting reconnect...
CRITICAL:core.margin_monitor:ğŸš¨ Reconnect failed. Panic closing all positions...
CRITICAL:utils.panic_switch:ğŸš¨ğŸš¨ğŸš¨ PANIC SWITCH ACTIVATED ğŸš¨ğŸš¨ğŸš¨
INFO:utils.panic_switch:No positions to close
INFO:core.margin_monitor:âœ… Positions closed safely. Exiting.
INFO:__main__:Shutting down...
INFO:strategies.funding_harvester:ğŸŒ¾ Funding Harvester stopped
INFO:websocket_manager:WebSocket disconnected
INFO:services.database:ğŸ’¾ Database consumer stopped
INFO:__main__:âœ… Shutdown complete

    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘                                                               â•‘
    â•‘   ğŸŒ¾ FUNDING HARVESTER - Delta Neutral Bot                   â•‘
    â•‘                                                               â•‘
    â•‘   Strategy: Long Spot + Short Perp = Funding Income          â•‘
    â•‘   Platform: Hyperliquid                                       â•‘
    â•‘                                                               â•‘
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
ğŸ“‹ Configuration:
   Wallet: 0x668D96ce...86838844
   Coin: HYPE
   Mode: LIVE
   Max Position: $20.0
   Strategy: Funding Harvester

âš ï¸  WARNING: Live trading mode!
    Press Ctrl+C within 5 seconds to cancel...
ERROR:asyncio:Task exception was never retrieved
future: <Task finished name='Task-3' coro=<MarginMonitor.watchdog_loop() done, defined at /Users/werk/Documents/Python/perfectwhale/core/margin_monitor.py:163> exception=SystemExit(0)>
Traceback (most recent call last):
  File "/Users/werk/Documents/Python/perfectwhale/main.py", line 406, in <module>
  File "/Users/werk/Documents/Python/perfectwhale/main.py", line 396, in main
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/base_events.py", line 1987, in _run_once
    handle._run()
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/Users/werk/Documents/Python/perfectwhale/core/margin_monitor.py", line 201, in watchdog_loop
SystemExit: 0
